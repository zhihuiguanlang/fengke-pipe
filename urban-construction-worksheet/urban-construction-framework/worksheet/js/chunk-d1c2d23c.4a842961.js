(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1c2d23c"],{"053b":function(t,e,i){var a=i("1e2c"),s=i("d910").f,r=Function.prototype,n=r.toString,o=/^\s*function ([^ (]*)/,l="name";a&&!(l in r)&&s(r,l,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(t){return""}}})},"11cf":function(t,e,i){"use strict";var a=i("5184"),s=i("d3d0"),r=i("f480");e["a"]=Object(a["a"])(s["a"],Object(r["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0}),i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",a=>{a&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))}):i.valid=e(t),i},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const i=this.watchers.find(t=>t._uid===e._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},"2eeb":function(t,e,i){"use strict";var a=i("1c8b"),s=i("5dfd").map,r=i("1ea7"),n=i("ff9c"),o=r("map"),l=n("map");a({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"65b8":function(t,e,i){"use strict";var a=i("bd03"),s=i.n(a);s.a},bd03:function(t,e,i){},da37:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"submit"},[i("div",{staticClass:"handle"},[i("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"light-green"},on:{click:t.addSubmit}},[i("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-plus")}}),t._v(" 添加 ")],1),i("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"cyan"},on:{click:t.amendSubmit}},[i("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-pencil")}}),t._v(" 编辑 ")],1),i("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"cyan",loading:t.stoploading},on:{click:t.stop}},[i("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-restart-off")}}),t._v(" 挂起 ")],1),i("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"cyan",loading:t.restartloading},on:{click:t.restart}},[i("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-restart")}}),t._v(" 启动 ")],1),i("v-btn",{staticClass:"mr-3",attrs:{color:"error",loading:t.deleteloading},on:{click:t.deleted}},[i("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-delete")}}),t._v(" 删除 ")],1),i("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"teal",loading:t.loading},on:{click:t.refresh}},[i("v-icon",{attrs:{left:""},domProps:{textContent:t._s("mdi-cached")}}),t._v(" 刷新 ")],1)],1),i("v-alert",{staticClass:"alert",attrs:{tile:"",light:"",dense:"",width:"150",height:"18",color:"cyan",border:"left",elevation:"0","colored-border":"",transition:"scale-transition"}},[t._v(" 工单信息列表 ")]),i("div",{staticClass:"elevation-7"},[i("v-data-table",{attrs:{light:"","show-select":"","fixed-header":"","single-select":"","calculate-width":"",height:"500","item-key":"id",items:t.submit,loading:t.table,headers:t.headers,page:t.current,"items-per-page":t.limit,"loading-text":"loading...","server-items-length":t.total,"footer-props":{itemsPerPageOptions:[5,10,15,20]}},on:{"update:page":[function(e){t.current=e},t.updatePage],"update:items-per-page":t.updateItem},scopedSlots:t._u([{key:"item.status",fn:function(e){var a=e.item;return[i("v-chip",{class:""+(4!=a.status||"error"),attrs:{label:""}},[t._v(" "+t._s(t.status[a["status"]])+" ")])]}}]),model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1),i("v-dialog",{attrs:{light:"",persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("Submit Profile")])]),i("v-card-text",[i("v-container",[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{rules:t.rule.title,label:"工单名称*",required:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),i("v-select",{attrs:{rules:t.rule.type,label:"工单类型*",items:t.model,required:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),i("v-select",{attrs:{rules:t.rule.acceptUserId,"item-text":"nickname","item-value":"id",label:"处理人*",items:t.list,required:""},model:{value:t.form.acceptUserId,callback:function(e){t.$set(t.form,"acceptUserId",e)},expression:"form.acceptUserId"}}),i("v-text-field",{attrs:{rules:t.rule.level,label:"信息等级*",required:""},model:{value:t.form.level,callback:function(e){t.$set(t.form,"level",e)},expression:"form.level"}})],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("关闭")]),i("v-btn",{attrs:{color:"blue darken-1",text:"",loading:t.saveloading},on:{click:t.save}},[t._v("保存")])],1)],1)],1)],1)},s=[],r=(i("dbb3"),i("2eeb"),i("053b"),i("9b6e")),n={name:"submit",data:function(){return{headers:[{text:"工单编号",align:"center",value:"code",width:200},{text:"工单名称",align:"center",value:"title",width:200},{text:"工单类型",align:"center",value:"type",width:200},{text:"提交人",align:"center",value:"submitterName",width:200},{text:"提交时间",align:"center",value:"createTime",width:200},{text:"处理人",align:"center",value:"acceptUserName",width:200},{text:"处理时间",align:"center",value:"handlingTime",width:200},{text:"信息等级",align:"center",value:"level",width:200},{text:"工单状态",align:"center",value:"status",width:200}],status:{0:"已提交",1:"已审批",2:"已复核",3:"已挂起",4:"被驳回"},model:[],list:[],page:1,total:0,limit:10,current:1,submit:[],form:{type:"",title:"",level:"",acceptUserId:""},rule:{type:[function(t){return!!t||"必填"}],title:[function(t){return!!t||"必填"}],level:[function(t){return!!t||"必填"}],acceptUserId:[function(t){return!!t||"必填"}]},select:[],valid:!0,table:!1,dialog:!1,loading:!1,stoploading:!1,saveloading:!1,deleteloading:!1,restartloading:!1}},mounted:function(){this.mySubmit(),this.myModel(),this.allUser()},methods:{mySubmit:function(){var t=this;this.table=!0;var e=this.page,i=this.limit;this.$axios.post("/api-ops/worker/queryHistoryWithAssignee",{page:e,limit:i}).then((function(e){if(e){var i=e.data,a=i.total,s=i.records,r=i.current;t.total=a,t.submit=s,t.current=r}t.table=!1,t.loading=!1}))},myModel:function(){var t=this;this.$axios.post("/api-ops/workorderTemplate/list",{}).then((function(e){e&&(t.model=e.data.map((function(t){return t.name})))}))},allUser:function(){var t=this;this.$axios.get("/api-user/users/list").then((function(e){e&&(t.list=e.data)}))},updatePage:function(t){this.page=t,this.mySubmit()},updateItem:function(t){this.limit=t,this.mySubmit()},deleted:function(){var t=this;if(this.select[0]){var e=this.select[0],i=e.id,a=e.processInstanceId;this.deleteloading=!0,this.$axios.post("/api-ops/worker/delete",{id:i,processInstanceId:a}).then((function(e){e&&(t.$notice.success("删除成功"),t.select=[],t.mySubmit()),t.deleteloading=!1}))}else this.$notice.error("请选择删除项")},stop:function(){var t=this;if(this.select[0]){var e=this.select[0],i=e.id,a=e.processInstanceId;this.stoploading=!0,this.$axios.post("/api-ops/worker/operation",{id:i,type:!1,processInstanceId:a}).then((function(e){e&&(t.$notice.success("挂起成功"),t.select=[],t.mySubmit()),t.stoploading=!1}))}else this.$notice.error("请选择挂起项")},restart:function(){var t=this;if(this.select[0]){var e=this.select[0],i=e.id,a=e.processInstanceId;this.restartloading=!0,this.$axios.post("/api-ops/worker/operation",{id:i,type:!0,processInstanceId:a}).then((function(e){e&&(t.$notice.success("启动成功"),t.select=[],t.mySubmit()),t.restartloading=!1}))}else this.$notice.error("请选择启动项")},refresh:function(){this.loading=!0,this.mySubmit()},close:function(){this.dialog=!1,this.$refs.form.reset()},addSubmit:function(){delete this.form["id"],this.dialog=!0},amendSubmit:function(){this.select[0]?(this.form=Object(r["a"])({},this.select[0]),this.dialog=!0):this.$notice.error("请选择编辑项")},save:function(){var t=this;if(this.$refs.form.validate(),this.valid){var e=this.list.filter((function(e){return e.id==t.form.acceptUserId}));this.form.acceptUserName=e[0].nickname;var i=this.form.id,a=void 0===i?null:i,s=a?"/api-ops/workorder/saveOrUpdate":"/api-ops/worker/add";this.saveloading=!0,this.$axios.post(s,this.form).then((function(e){e&&(t.$notice.success("操作成功"),a||(t.page=1),t.select=[],t.mySubmit(),t.close()),t.saveloading=!1}))}}}},o=n,l=(i("65b8"),i("9ca4")),c=i("aeb5"),d=i.n(c),u=i("075d"),h=i("6178"),m=i("1656"),p=i("818b"),f=i("b5e3"),v=i("9777"),g=i("fbb3"),b=i("c0fe"),x=i("11cf"),w=i("4dee"),y=i("ec957"),_=i("dad0"),k=i("2b7d"),$=Object(l["a"])(o,a,s,!1,null,"30f3d87b",null);e["default"]=$.exports;d()($,{VAlert:u["a"],VBtn:h["a"],VCard:m["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VChip:f["a"],VContainer:v["a"],VDataTable:g["a"],VDialog:b["a"],VForm:x["a"],VIcon:w["a"],VSelect:y["a"],VSpacer:_["a"],VTextField:k["a"]})},dad0:function(t,e,i){"use strict";i("7cf3");var a=i("7f0b");e["a"]=Object(a["i"])("spacer","div","v-spacer")}}]);
//# sourceMappingURL=chunk-d1c2d23c.4a842961.js.map