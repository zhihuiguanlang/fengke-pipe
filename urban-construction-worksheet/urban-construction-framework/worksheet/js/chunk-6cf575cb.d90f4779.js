(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cf575cb"],{"11cf":function(e,t,a){"use strict";var i=a("5184"),s=a("d3d0"),r=a("f480");t["a"]=Object(i["a"])(s["a"],Object(r["b"])("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0}),a={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",i=>{i&&(this.errorBag.hasOwnProperty(e._uid)||(a.valid=t(e)))}):a.valid=t(e),a},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const a=this.watchers.find(e=>e._uid===t._uid);a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},1553:function(e,t,a){"use strict";var i=a("74af"),s=a.n(i);s.a},"74af":function(e,t,a){},cad0:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"model"},[a("div",{staticClass:"handle"},[a("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"light-green"},on:{click:e.addModel}},[a("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-plus")}}),e._v(" 添加模板 ")],1),a("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"cyan"},on:{click:e.amendModel}},[a("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-pencil")}}),e._v(" 编辑 ")],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"error",loading:e.deleteloading},on:{click:e.deleted}},[a("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-delete")}}),e._v(" 删除 ")],1),a("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"teal",loading:e.loading},on:{click:e.refresh}},[a("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-cached")}}),e._v(" 刷新 ")],1),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":250,light:"","offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({staticClass:"mr-3",attrs:{outlined:"",color:"cyan"}},i),[a("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-file-find")}}),e._v(" 搜索 ")],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-card",[a("v-card-text",[a("v-container",[a("v-form",{ref:"searchForm"},[a("v-select",{attrs:{items:e.name,label:"模板名称*"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",loading:e.resetloading},on:{click:e.reset}},[e._v("Reset")]),a("v-btn",{attrs:{text:"",color:"primary",loading:e.searchloading},on:{click:e.search}},[e._v("Search")])],1)],1)],1)],1),a("v-alert",{staticClass:"alert",attrs:{tile:"",light:"",dense:"",width:"150",height:"18",color:"cyan",border:"left",elevation:"0","colored-border":"",transition:"scale-transition"}},[e._v(" 工单模板列表 ")]),a("div",{staticClass:"elevation-7"},[a("v-data-table",{attrs:{light:"","show-select":"","fixed-header":"","single-select":"","calculate-width":"",height:"500","item-key":"id",items:e.model,loading:e.table,headers:e.headers,page:e.current,"items-per-page":e.limit,"loading-text":"loading...","server-items-length":e.total,"footer-props":{itemsPerPageOptions:[5,10,15,20]}},on:{"update:page":[function(t){e.current=t},e.updatePage],"update:items-per-page":e.updateItem},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}})],1),a("v-dialog",{attrs:{light:"",persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Model Profile")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-select",{attrs:{rules:e.rule.name,label:"模板名称*",items:e.name,required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("v-select",{attrs:{rules:e.rule.acceptUserId,"item-text":"nickname","item-value":"id",label:"审批人*",items:e.user,required:""},model:{value:e.form.acceptUserId,callback:function(t){e.$set(e.form,"acceptUserId",t)},expression:"form.acceptUserId"}}),a("v-text-field",{attrs:{rules:e.rule.level,label:"工单等级*",required:""},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("关闭")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.saveloading},on:{click:e.save}},[e._v("保存")])],1)],1)],1)],1)},s=[],r=(a("dbb3"),a("9b6e")),o={name:"model",data:function(){return{headers:[{text:"模板名称",align:"center",value:"name",width:200},{width:200,text:"审批人",align:"center",value:"acceptUserName"},{text:"工单等级",align:"center",value:"level",width:200},{text:"提交时间",align:"center",value:"createTime",width:200}],name:["管廊保洁","管廊巡检","设备维修","运维监控"],page:1,total:0,limit:10,current:1,user:[],model:[],form:{name:"",level:"",acceptUserId:""},rule:{name:[function(e){return!!e||"必填"}],level:[function(e){return!!e||"必填"}],acceptUserId:[function(e){return!!e||"必填"}]},searchForm:{name:""},select:[],menu:!1,valid:!0,table:!1,dialog:!1,loading:!1,saveloading:!1,resetloading:!1,searchloading:!1,deleteloading:!1}},mounted:function(){this.myUser(),this.myModel()},methods:{myModel:function(){var e=this;this.table=!0;var t=this.page,a=this.limit,i=this.searchForm;this.$axios.post("/api-ops/workorderTemplate/page",Object(r["a"])(Object(r["a"])({},i),{},{limit:a,page:t})).then((function(t){if(t){var a=t.data,i=a.total,s=a.records,r=a.current;e.total=i,e.model=s,e.current=r}e.menu=!1,e.table=!1,e.loading=!1,e.resetloading=!1,e.searchloading=!1}))},myUser:function(){var e=this;this.$axios.get("/api-user/users/list").then((function(t){t&&(e.user=t.data)}))},updatePage:function(e){this.page=e,this.myModel()},updateItem:function(e){this.limit=e,this.myModel()},deleted:function(){var e=this;this.select[0]?(this.deleteloading=!0,this.$axios.delete("/api-ops/workorderTemplate/delete",{params:{id:this.select[0].id}}).then((function(t){t&&(e.$notice.success("删除成功"),e.select=[],e.myModel()),e.deleteloading=!1}))):this.$notice.error("请选择删除项")},refresh:function(){this.loading=!0,this.myModel()},reset:function(){this.$refs.searchForm.reset(),this.resetloading=!0,this.myModel()},search:function(){this.searchloading=!0,this.myModel()},close:function(){this.dialog=!1,this.$refs.form.reset()},addModel:function(){delete this.form["id"],this.dialog=!0},amendModel:function(){this.select[0]?(this.form=Object(r["a"])({},this.select[0]),this.dialog=!0):this.$notice.error("请选择编辑项")},save:function(){var e=this;if(this.$refs.form.validate(),this.valid){var t=this.user.filter((function(t){return t.id==e.form.acceptUserId})),a=this.form.id,i=void 0===a?null:a;this.form["flowDiagram"]="worker",this.form["acceptUserName"]=t[0]["nickname"],this.saveloading=!0,this.$axios.post("/api-ops/workorderTemplate/saveOrUpdate",Object(r["a"])({},this.form)).then((function(t){t&&(e.$notice.success("操作成功"),i||(e.page=1),e.select=[],e.myModel(),e.close()),e.saveloading=!1}))}}}},l=o,n=(a("1553"),a("9ca4")),c=a("aeb5"),d=a.n(c),u=a("075d"),h=a("6178"),m=a("1656"),v=a("818b"),f=a("9777"),p=a("fbb3"),g=a("c0fe"),b=a("11cf"),x=a("4dee"),_=a("c24c"),w=a("ec957"),k=a("dad0"),V=a("2b7d"),$=Object(n["a"])(l,i,s,!1,null,"077d0492",null);t["default"]=$.exports;d()($,{VAlert:u["a"],VBtn:h["a"],VCard:m["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VContainer:f["a"],VDataTable:p["a"],VDialog:g["a"],VForm:b["a"],VIcon:x["a"],VMenu:_["a"],VSelect:w["a"],VSpacer:k["a"],VTextField:V["a"]})},dad0:function(e,t,a){"use strict";a("7cf3");var i=a("7f0b");t["a"]=Object(i["i"])("spacer","div","v-spacer")}}]);
//# sourceMappingURL=chunk-6cf575cb.d90f4779.js.map