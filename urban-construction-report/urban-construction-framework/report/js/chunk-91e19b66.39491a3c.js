(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-91e19b66"],{"0159":function(t,e,a){"use strict";var n=a("cb14"),r=a.n(n);r.a},"053b":function(t,e,a){var n=a("1e2c"),r=a("d910").f,i=Function.prototype,l=i.toString,o=/^\s*function ([^ (]*)/,s="name";n&&!(s in i)&&r(i,s,{configurable:!0,get:function(){try{return l.call(this).match(o)[1]}catch(t){return""}}})},"0a51":function(t,e,a){"use strict";var n=a("1c8b"),r=a("1e2c"),i=a("d890"),l=a("faa8"),o=a("a719"),s=a("d910").f,c=a("c69d"),u=i.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};c(h,u);var f=h.prototype=u.prototype;f.constructor=h;var m=f.toString,y="Symbol(test)"==String(u("test")),p=/^Symbol\((.*)\)[^)]+$/;s(f,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=m.call(t);if(l(d,t))return"";var a=y?e.slice(7,-1):e.replace(p,"$1");return""===a?void 0:a}}),n({global:!0,forced:!0},{Symbol:h})}},"1c2e":function(t,e,a){"use strict";var n=a("1944"),r=a("857c"),i=a("efe2"),l=a("99ad"),o="toString",s=RegExp.prototype,c=s[o],u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=o;(u||d)&&n(RegExp.prototype,o,(function(){var t=r(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in s)?l.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},"2eeb":function(t,e,a){"use strict";var n=a("1c8b"),r=a("5dfd").map,i=a("1ea7"),l=a("ff9c"),o=i("map"),s=l("map");n({target:"Array",proto:!0,forced:!o||!s},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"67e5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],staticClass:"alarm"},[a("div",{staticClass:"handle"},[a("v-select",{staticClass:"select",attrs:{light:"",dense:"",outlined:"",label:"报表类型",items:t.report,loading:t.loading},on:{input:t.filter},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),"day"==t.type?a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticClass:"starttime",attrs:{light:"",label:"选择日期","prepend-icon":"mdi-calendar-range ",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",r,!1),n))]}}],null,!1,2551737207),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{light:"","no-title":"",scrollable:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.datelyer}},[t._v("OK")])],1)],1):t._e(),"month"==t.type||"week"==t.type?a("v-menu",{ref:"round",attrs:{"close-on-content-click":!1,"return-value":t.monthly,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.monthly=e},"update:return-value":function(e){t.monthly=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({staticClass:"starttime",attrs:{light:"",label:"选择年份、月份","prepend-icon":"mdi-calendar-range ",readonly:""},model:{value:t.monthly,callback:function(e){t.monthly=e},expression:"monthly"}},"v-text-field",r,!1),n))]}}],null,!1,4076255617),model:{value:t.round,callback:function(e){t.round=e},expression:"round"}},[a("v-date-picker",{attrs:{light:"","no-title":"",scrollable:"",type:"month"},model:{value:t.monthly,callback:function(e){t.monthly=e},expression:"monthly"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.round=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.monthlyer}},[t._v("OK")])],1)],1):t._e(),"week"==t.type?a("v-select",{staticClass:"select ml-4",attrs:{light:"",dense:"",outlined:"",label:"选择周",items:t.week,loading:t.weekloading},on:{input:t.weeklyer},model:{value:t.weekly,callback:function(e){t.weekly=e},expression:"weekly"}}):t._e(),"quarter"==t.type||"half"==t.type||"year"==t.type?a("v-select",{staticClass:"select ml-4",attrs:{light:"",dense:"",outlined:"",label:"选择年份",items:t.year,loading:t.yearloading},on:{input:t.yearlyer},model:{value:t.yearly,callback:function(e){t.yearly=e},expression:"yearly"}}):t._e(),"half"==t.type?a("v-select",{staticClass:"select ml-4",attrs:{light:"",dense:"",outlined:"",label:"选择半年",items:t.half,loading:t.halfloading},on:{input:t.halflyer},model:{value:t.halfly,callback:function(e){t.halfly=e},expression:"halfly"}}):t._e(),"quarter"==t.type?a("v-select",{staticClass:"select ml-4",attrs:{light:"",dense:"",outlined:"",label:"选择季度",items:t.quarter,loading:t.quarterloading},on:{input:t.quarterlyer},model:{value:t.quarterly,callback:function(e){t.quarterly=e},expression:"quarterly"}}):t._e(),a("button",{staticClass:"btn mr-4 ml-4 colour",attrs:{type:"button"},on:{click:t.lookup}},[t._v(" 查询 ")]),a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.inquiry}},[t._v("下载")])],1),a("div",{staticClass:"summary"},[a("v-alert",{staticClass:"alert",attrs:{tile:"",light:"",dense:"",width:"180",height:"18",color:"cyan",border:"left",elevation:"0","colored-border":"",transition:"scale-transition"}},[t._v("管廊报警信息汇总 ")]),a("v-select",{staticClass:"select",attrs:{loading:t.alarmloading,label:"当前报警设备","item-text":"name","item-value":"id",items:t.alarm,outlined:"",light:"",dense:""},on:{input:t.find},model:{value:t.alarmId,callback:function(e){t.alarmId=e},expression:"alarmId"}})],1),a("div",{ref:"alarm",staticClass:"report elevation-7"},[a("p",[t._v("今日报警信息：")]),a("p",[t._v(" "+t._s(t.plan.length?t.plan[0].capsuleName:"")+" "+t._s(t.plan.length?t.plan[0].segmentName:"")+" "+t._s(t.plan.length?t.plan[0].reason:"")+"。 ")]),a("p",[t._v(" "+t._s(new Date(t.plan.length?t.plan[0].alarmTime:"").toLocaleString())+"，系统报警显示"+t._s(t.plan.length?t.plan[0].capsuleName:"")+" "+t._s(t.plan.length?t.plan[0].segmentName:"")+t._s(t.plan.length?t.plan[0].reason:"")+"，监控中心第一 时间查看了现场传感器数据。 ")]),a("div",{staticClass:"abnormal",attrs:{id:"abnormal"}}),a("div",{staticClass:"normal",attrs:{id:"normal"}})]),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:t.wait,callback:function(e){t.wait=e},expression:"wait"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",{staticClass:"pt-2"},[t._v(" Please stand by "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},r=[];a("b4fb"),a("dbb3"),a("2eeb"),a("513c"),a("f3dd"),a("0a51"),a("9b11"),a("e18c"),a("96db"),a("af86"),a("98e0"),a("77ad"),a("053b"),a("1c2e");function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function l(t,e){if(t){if("string"===typeof t)return i(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,e):void 0}}function o(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=l(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(s)throw i}}}}var s=a("9b6e"),c=a("c512"),u={name:"alarm",data:function(){return{report:c["c"],week:c["e"],quarter:c["b"],half:c["a"],year:[],type:"day",menu:!1,date:(new Date).toISOString().substr(0,10),round:!1,loading:!1,monthly:"",weekly:"",weekloading:!1,yearly:"",yearloading:!1,halfly:"",halfloading:!1,quarterly:"",quarterloading:!1,startTime:"",endTime:"",wait:!1,alarmloading:!1,alarm:[],plan:[],alarmId:"",chart:{},deal:{}}},created:function(){this.query()},methods:{onResize:function(){this.$chart.bar("abnormal",this.chart),this.$chart.bar("normal",this.deal)},query:function(){var t=(new Date).getFullYear(),e=0;while(e<5)this.year.push(t-e),e++;this.endTime=this.date,this.startTime=this.date,this.create()},lookup:function(){this.endTime||this.startTime?this.create():this.$notice.info("请选择查询范围")},create:function(){var t=this,e=this.startTime,a=this.endTime;this.$axios.post("/dataManage/autoReport/getAlarmToday",{startTime:e,endTime:a}).then((function(e){e&&(t.alarm=e.result.map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{name:"".concat(t.deviceName,"（ ").concat(t.segmentName," / ").concat(t.capsuleName," ）")})})),t.alarmId=t.alarm[0].id,t.plan=t.alarm.filter((function(e){return e.id==t.alarmId})),t.myData())}))},myData:function(){var t=this;this.$axios.post("/dataManage/alarm/getAlarmMinuteData",{id:this.plan[0].id,isRealTime:!1}).then((function(e){if(e){var a,n=[],r=[],i=o(e.result.data);try{for(i.s();!(a=i.n()).done;){var l=a.value;r.push(l.value[e.result.dataKey]),n.push(new Date(l.gatherTime).toLocaleString())}}catch(s){i.e(s)}finally{i.f()}t.chart={date:n,data:r,dataKey:e.result.dataKey,title:"图表 1 ".concat(t.plan[0].reason,"报警时刻数据")},t.$chart.bar("abnormal",t.chart),t.myAlarm(e.result.dataKey)}}))},myAlarm:function(t){var e=this;this.alarmloading=!0,this.$axios.post("/dataManage/autoReport/getDeviceData",{deviceId:this.plan[0].deviceId,alarmId:this.plan[0].id}).then((function(a){if(a){var n,r=[],i=[],l=o(a.result);try{for(l.s();!(n=l.n()).done;){var s=n.value;i.push(s.value[t]),r.push(new Date(s.gatherTime).toLocaleString())}}catch(c){l.e(c)}finally{l.f()}e.deal={date:r,data:i,dataKey:t,title:"图表 2 ".concat(e.plan[0].reason,"报警处理前后数据")},e.$chart.bar("normal",e.deal)}e.alarmloading=!1}))},filter:function(){if(this.loading=!1,this.monthly=null,this.weekly=null,this.weekloading=!1,this.yearly=null,this.yearloading=!1,this.halfly=null,this.halfloading=!1,this.quarterly=null,this.quarterloading=!1,"day"==this.type)return this.endTime=this.date,void(this.startTime=this.date);this.startTime=null,this.endTime=null},yearlyer:function(){return"quarter"==this.type?(this.quarterly=null,void(this.quarterloading=!1)):"half"==this.type?(this.halfly=null,void(this.halfloading=!1)):(this.endTime="".concat(this.yearly,"-12-30"),void(this.startTime="".concat(this.yearly,"-01-01")))},halflyer:function(t){var e=6*Number(t),a=e-6+1;this.endTime="".concat(this.yearly,"-").concat(e<10?"0"+e:e,"-30"),this.startTime="".concat(this.yearly,"-").concat(a<10?"0"+a:a,"-01")},quarterlyer:function(t){var e=3*Number(t),a=e-3+1;this.endTime="".concat(this.yearly,"-").concat(e<10?"0"+e:e,"-30"),this.startTime="".concat(this.yearly,"-").concat(a<10?"0"+a:a,"-01")},monthlyer:function(){if(this.$refs.round.save(this.monthly),"month"==this.type)return this.endTime="".concat(this.monthly,"-30"),void(this.startTime="".concat(this.monthly,"-01"));this.weekly=null,this.weekloading=!1},weeklyer:function(t){var e=7*Number(t),a=e-7+1;this.endTime="".concat(this.monthly,"-").concat(e<10?"0"+e:e),this.startTime="".concat(this.monthly,"-").concat(a<10?"0"+a:a)},datelyer:function(){this.$refs.menu.save(this.date),this.endTime=this.date,this.startTime=this.date},inquiry:function(){this.$PDFSave(this.$refs.alarm,"".concat(this.startTime," - ").concat(this.endTime))},find:function(t){this.plan=this.alarm.filter((function(e){return e.id==t})),this.myData()}}},d=u,h=(a("0159"),a("9ca4")),f=a("aeb5"),m=a.n(f),y=a("85b6"),p=a("acf8"),v=a("526c"),g=a("d0d5"),b=a("0a1a"),x=a("be21"),k=a("17e6"),w=a("244d"),T=a("e4d7"),S=a("983c"),_=a("8c3e"),C=a("fd64"),A=a.n(C),q=a("6aca"),$=Object(h["a"])(d,n,r,!1,null,"3a1e413d",null);e["default"]=$.exports;m()($,{VAlert:y["a"],VBtn:p["a"],VCard:v["a"],VCardText:g["a"],VDatePicker:b["a"],VDialog:x["a"],VMenu:k["a"],VProgressLinear:w["a"],VSelect:T["a"],VSpacer:S["a"],VTextField:_["a"]}),A()($,{Resize:q["a"]})},"77ad":function(t,e,a){"use strict";var n=a("1c8b"),r=a("a719"),i=a("74e7"),l=a("e1d6"),o=a("d88d"),s=a("da10"),c=a("1bbd"),u=a("90fb"),d=a("1ea7"),h=a("ff9c"),f=d("slice"),m=h("slice",{ACCESSORS:!0,0:0,1:2}),y=u("species"),p=[].slice,v=Math.max;n({target:"Array",proto:!0,forced:!f||!m},{slice:function(t,e){var a,n,u,d=s(this),h=o(d.length),f=l(t,h),m=l(void 0===e?h:e,h);if(i(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?r(a)&&(a=a[y],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return p.call(d,f,m);for(n=new(void 0===a?Array:a)(v(m-f,0)),u=0;f<m;f++,u++)f in d&&c(n,u,d[f]);return n.length=u,n}})},"96db":function(t,e,a){"use strict";var n=a("f62c").charAt,r=a("b702"),i=a("99ee"),l="String Iterator",o=r.set,s=r.getterFor(l);i(String,"String",(function(t){o(this,{type:l,string:String(t),index:0})}),(function(){var t,e=s(this),a=e.string,r=e.index;return r>=a.length?{value:void 0,done:!0}:(t=n(a,r),e.index+=t.length,{value:t,done:!1})}))},"98e0":function(t,e,a){var n=a("1c8b"),r=a("e62b"),i=a("f471"),l=!i((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:l},{from:r})},"99ad":function(t,e,a){"use strict";var n=a("857c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"9b11":function(t,e,a){var n=a("6d51");n("iterator")},af86:function(t,e,a){var n=a("d890"),r=a("064b"),i=a("a133"),l=a("0fc1"),o=a("90fb"),s=o("iterator"),c=o("toStringTag"),u=i.values;for(var d in r){var h=n[d],f=h&&h.prototype;if(f){if(f[s]!==u)try{l(f,s,u)}catch(y){f[s]=u}if(f[c]||l(f,c,d),r[d])for(var m in i)if(f[m]!==i[m])try{l(f,m,i[m])}catch(y){f[m]=i[m]}}}},cb14:function(t,e,a){},e62b:function(t,e,a){"use strict";var n=a("e349"),r=a("3553"),i=a("69c5"),l=a("98a9f"),o=a("d88d"),s=a("1bbd"),c=a("b60f");t.exports=function(t){var e,a,u,d,h,f,m=r(t),y="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,b=c(m),x=0;if(g&&(v=n(v,p>2?arguments[2]:void 0,2)),void 0==b||y==Array&&l(b))for(e=o(m.length),a=new y(e);e>x;x++)f=g?v(m[x],x):m[x],s(a,x,f);else for(d=b.call(m),h=d.next,a=new y;!(u=h.call(d)).done;x++)f=g?i(d,v,[u.value,x],!0):u.value,s(a,x,f);return a.length=x,a}},f62c:function(t,e,a){var n=a("3da3"),r=a("2732"),i=function(t){return function(e,a){var i,l,o=String(r(e)),s=n(a),c=o.length;return s<0||s>=c?t?"":void 0:(i=o.charCodeAt(s),i<55296||i>56319||s+1===c||(l=o.charCodeAt(s+1))<56320||l>57343?t?o.charAt(s):i:t?o.slice(s,s+2):l-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},fd64:function(t,e){t.exports=function(t,e){var a="function"===typeof t.exports?t.exports.extendOptions:t.options;for(var n in"function"===typeof t.exports&&(a.directives=t.exports.options.directives),a.directives=a.directives||{},e)a.directives[n]=a.directives[n]||e[n]}}}]);
//# sourceMappingURL=chunk-91e19b66.39491a3c.js.map