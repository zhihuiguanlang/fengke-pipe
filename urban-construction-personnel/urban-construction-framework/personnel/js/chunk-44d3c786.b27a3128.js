(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44d3c786"],{"282f":function(e,t,a){},4933:function(e,t,a){},"513c":function(e,t,a){"use strict";var r=a("1e2c"),n=a("d890"),o=a("e8d6"),s=a("1944"),i=a("faa8"),l=a("2118"),c=a("7063"),d=a("9f67"),u=a("efe2"),f=a("6d60"),p=a("b338").f,h=a("aa6b").f,m=a("d910").f,v=a("c10f").trim,b="Number",g=n[b],x=g.prototype,N=l(f(x))==b,I=function(e){var t,a,r,n,o,s,i,l,c=d(e,!1);if("string"==typeof c&&c.length>2)if(c=v(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+c}for(o=c.slice(2),s=o.length,i=0;i<s;i++)if(l=o.charCodeAt(i),l<48||l>n)return NaN;return parseInt(o,r)}return+c};if(o(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var w,k=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof k&&(N?u((function(){x.valueOf.call(a)})):l(a)!=b)?c(new g(I(t)),a,k):I(t)},C=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;C.length>y;y++)i(g,w=C[y])&&!i(k,w)&&m(k,w,h(g,w));k.prototype=x,x.constructor=k,s(n,b,k)}},7063:function(e,t,a){var r=a("a719"),n=a("50fb");e.exports=function(e,t,a){var o,s;return n&&"function"==typeof(o=t.constructor)&&o!==a&&r(s=o.prototype)&&s!==a.prototype&&n(e,s),e}},b1f7:function(e,t,a){"use strict";a("4933");var r=a("2b7d"),n=a("5184");const o=Object(n["a"])(r["a"]);t["a"]=o.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...r["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(a,t)+"px"},genInput(){const e=r["a"].options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){r["a"].options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},b858:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"branch"},[a("div",{staticClass:"handle"},[a("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"light-green"},on:{click:e.addBranch}},[a("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-plus")}}),e._v(" 添加部门 ")],1),a("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"cyan"},on:{click:e.amendBranch}},[a("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-pencil")}}),e._v(" 编辑 ")],1),a("v-btn",{staticClass:"mr-3",attrs:{color:"error",loading:e.deleteloading},on:{click:e.deleted}},[a("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-delete")}}),e._v(" 删除 ")],1),a("v-btn",{staticClass:"mr-3",attrs:{outlined:"",color:"teal",loading:e.loading},on:{click:e.refresh}},[a("v-icon",{attrs:{left:""},domProps:{textContent:e._s("mdi-cached")}}),e._v(" 刷新 ")],1)],1),a("v-alert",{staticClass:"alert",attrs:{tile:"",light:"",dense:"",width:"150",height:"18",color:"cyan",border:"left",elevation:"0","colored-border":"",transition:"scale-transition"}},[e._v(" 部门列表 ")]),a("div",{staticClass:"elevation-7"},[a("el-table",{attrs:{"tree-props":{children:"subDept"},data:e.branch,"row-key":"id",border:""}},[a("el-table-column",{attrs:{align:"center",prop:"deptName",label:"部门名称","min-width":"200"}}),a("el-table-column",{attrs:{align:"center",label:"部门编码",prop:"deptCode","min-width":"200"}}),a("el-table-column",{attrs:{prop:"leader",label:"负责人",align:"center","min-width":"200"}}),a("el-table-column",{attrs:{align:"center","min-width":"200",label:"部门描述",prop:"deptDescribe"}}),a("el-table-column",{attrs:{width:"45",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("v-checkbox",{staticClass:"my-2",staticStyle:{height:"30px"},attrs:{light:"",dense:"",multiple:"",color:"rgba(0, 0, 0, 0.54)",value:JSON.stringify(t.row)},on:{click:function(a){return e.choice(t.row)}},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}})]}}])})],1)],1),a("v-dialog",{attrs:{light:"",persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Branch Profile")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-select",{attrs:{rules:e.rule.parentId,"item-text":"deptName",label:"上级部门*","item-value":"id",items:e.boss,required:""},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}}),a("v-text-field",{attrs:{rules:e.rule.deptName,label:"部门名称*",required:""},model:{value:e.form.deptName,callback:function(t){e.$set(e.form,"deptName",t)},expression:"form.deptName"}}),a("v-text-field",{attrs:{rules:e.rule.leader,label:"负责人*",required:""},model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}}),a("v-text-field",{attrs:{rules:e.rule.phone,label:"联系电话*",required:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),a("v-text-field",{attrs:{rules:e.rule.email,label:"邮箱*",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("v-select",{attrs:{rules:e.rule.status,items:e.status,label:"部门状态*",required:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}}),a("v-text-field",{attrs:{rules:e.rule.deptCode,label:"部门编码*",required:""},model:{value:e.form.deptCode,callback:function(t){e.$set(e.form,"deptCode",t)},expression:"form.deptCode"}}),a("v-textarea",{attrs:{rules:e.rule.deptDescribe,label:"部门描述*",required:"",counter:""},model:{value:e.form.deptDescribe,callback:function(t){e.$set(e.form,"deptDescribe",t)},expression:"form.deptDescribe"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("关闭")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.saveloading},on:{click:e.save}},[e._v("保存")])],1)],1)],1)],1)},n=[],o=(a("b4fb"),a("513c"),a("0eaa")),s=a("c52d"),i={name:"branch",data:function(){return{boss:[],branch:[],status:[{text:"正常",value:0},{text:"停用",value:1}],form:{deptName:"",leader:"",phone:"",email:"",status:"",parentId:"",deptCode:"",deptDescribe:""},rule:{deptName:[function(e){return!!e||"必填"}],leader:[function(e){return!!e||"必填"}],phone:[function(e){return!!e||"必填"}],email:[function(e){return!!e||"必填"}],deptCode:[function(e){return!!e||"必填"}],status:[function(e){return e===Number(e)||"必选"}],parentId:[function(e){return e===Number(e)||"必选"}],deptDescribe:[function(e){return!!e&&e.length<=25||"Max 25 characters"}]},select:[],valid:!0,dialog:!1,loading:!1,saveloading:!1,deleteloading:!1}},mounted:function(){this.myBranch()},methods:{myBranch:function(){var e=this;this.$axios.get("/api-user/dept/list").then((function(t){t&&(e.branch=t.data,e.boss=[{id:-1,deptName:"顶级部门"}].concat(Object(s["a"])(e.branch))),e.loading=!1}))},deleted:function(){var e=this;this.select[0]?(this.deleteloading=!0,this.$axios.delete("/api-user/dept/removeById",{params:{deptId:JSON.parse(this.select[0]).id}}).then((function(t){t&&(e.$notice.success("删除成功"),e.select=[],e.myBranch()),e.deleteloading=!1}))):this.$notice.error("请选择删除项")},refresh:function(){this.loading=!0,this.myBranch()},close:function(){this.dialog=!1,this.$refs.form.reset()},addBranch:function(){delete this.form["id"],this.dialog=!0},amendBranch:function(){this.select[0]?(this.form=Object(o["a"])({},JSON.parse(this.select[0])),this.dialog=!0):this.$notice.error("请选择编辑项")},save:function(){var e=this;this.$refs.form.validate(),this.valid&&(this.saveloading=!0,this.$axios.post("/api-user/dept/saveOrUpdate",Object(o["a"])({},this.form)).then((function(t){t&&(e.$notice.success("操作成功"),e.select=[],e.myBranch(),e.close()),e.saveloading=!1})))},choice:function(e){this.select=[JSON.stringify(e)]}}},l=i,c=(a("cec8"),a("4023")),d=a("aeb5"),u=a.n(d),f=a("075d"),p=a("6178"),h=a("1656"),m=a("818b"),v=a("81a6"),b=a("9777"),g=a("c0fe"),x=a("11cf"),N=a("4dee"),I=a("ec957"),w=a("dad0"),k=a("2b7d"),C=a("b1f7"),y=Object(c["a"])(l,r,n,!1,null,"49fccbe6",null);t["default"]=y.exports;u()(y,{VAlert:f["a"],VBtn:p["a"],VCard:h["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VCheckbox:v["a"],VContainer:b["a"],VDialog:g["a"],VForm:x["a"],VIcon:N["a"],VSelect:I["a"],VSpacer:w["a"],VTextField:k["a"],VTextarea:C["a"]})},c10f:function(e,t,a){var r=a("2732"),n=a("fc8c"),o="["+n+"]",s=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),l=function(e){return function(t){var a=String(r(t));return 1&e&&(a=a.replace(s,"")),2&e&&(a=a.replace(i,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},cec8:function(e,t,a){"use strict";var r=a("282f"),n=a.n(r);n.a},fc8c:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-44d3c786.b27a3128.js.map